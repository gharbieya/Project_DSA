<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø­Ø±Ùƒ Ø§Ù„Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ø¹Ø±Ø¨ÙŠ â€” Ø§Ù„Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù…ÙˆØ±ÙÙˆÙ„ÙˆØ¬ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --ink:          #1a1208;
    --parchment:    #f5edd6;
    --parchment-dk: #e3d0a8;
    --gold:         #b8860b;
    --gold-light:   #d4a820;
    --gold-pale:    #fdf3d0;
    --copper:       #7a3b0e;
    --teal:         #17524f;
    --teal-light:   #1f7a74;
    --teal-pale:    #e0f2f1;
    --red:          #8b1a1a;
    --cream:        #fdfaf2;
    --shadow:       rgba(26,18,8,.15);
    --green:        #1a5c2a;
    --green-pale:   #e0f2e5;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Tajawal', sans-serif;
    background: var(--parchment);
    color: var(--ink);
    min-height: 100vh;
    background-image:
      radial-gradient(ellipse at 15% 0%,   rgba(184,134,11,.07) 0%, transparent 55%),
      radial-gradient(ellipse at 85% 100%, rgba(23,82,79,.07)   0%, transparent 55%),
      url("data:image/svg+xml,%3Csvg width='52' height='52' viewBox='0 0 52 52' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M26 1l3 8h8l-7 5 3 8-7-5-7 5 3-8-7-5h8z' fill='%23b8860b' fill-opacity='0.03'/%3E%3C/svg%3E");
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  HEADER  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  header {
    background: linear-gradient(150deg, #1a1208 0%, #2e1a06 60%, #1a3330 100%);
    color: var(--gold-pale);
    padding: 2rem 2rem 1.6rem;
    position: relative;
    overflow: hidden;
    border-bottom: 3px solid var(--gold);
    box-shadow: 0 6px 30px var(--shadow);
  }
  header::before {
    content: '';
    position: absolute; inset: 0;
    background: repeating-linear-gradient(
      -45deg, transparent, transparent 18px,
      rgba(184,134,11,.035) 18px, rgba(184,134,11,.035) 19px
    );
    pointer-events: none;
  }
  .header-inner {
    max-width: 1440px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
    flex-wrap: wrap;
    position: relative;
  }
  .header-logo { font-family: 'Amiri', serif; }
  .header-logo .title-ar {
    font-size: clamp(1.6rem, 3.5vw, 2.6rem);
    font-weight: 700;
    color: var(--gold-pale);
    text-shadow: 0 2px 14px rgba(184,134,11,.4);
    line-height: 1.1;
  }
  .header-logo .title-fr {
    font-size: .78rem;
    color: var(--gold-pale);
    opacity: .55;
    letter-spacing: .03em;
    margin-top: .25rem;
  }
  .header-badges {
    display: flex;
    gap: .6rem;
    flex-wrap: wrap;
  }
  .hbadge {
    background: rgba(184,134,11,.18);
    border: 1px solid rgba(184,134,11,.35);
    border-radius: 20px;
    padding: .3rem 1rem;
    font-size: .8rem;
    color: var(--gold-pale);
    text-align: center;
  }
  .hbadge strong { color: var(--gold-light); font-size: 1rem; display: block; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  SEARCH BAR  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .search-section {
    background: linear-gradient(90deg, #1a1208, #2e1a06);
    padding: .8rem 2rem 1.2rem;
    border-bottom: 2px solid var(--gold);
  }
  .search-inner { max-width: 1440px; margin: 0 auto; }
  .search-box {
    display: flex;
    align-items: center;
    gap: .6rem;
    background: var(--cream);
    border: 2px solid var(--gold);
    border-radius: 40px;
    padding: .45rem .8rem .45rem 1.2rem;
    box-shadow: 0 4px 20px rgba(0,0,0,.3);
  }
  .search-box input {
    flex: 1;
    border: none;
    background: transparent;
    font-family: 'Amiri', serif;
    font-size: 1.2rem;
    color: var(--ink);
    outline: none;
    direction: rtl;
  }
  .search-box input::placeholder { color: #aaa; }
  .search-icon { color: var(--gold); font-size: 1.2rem; }
  .search-tabs {
    display: flex;
    gap: .4rem;
    margin-top: .7rem;
    flex-wrap: wrap;
  }
  .stab {
    padding: .3rem .9rem;
    border: 1px solid rgba(255,255,255,.15);
    border-radius: 20px;
    background: transparent;
    color: rgba(255,255,255,.55);
    font-family: 'Tajawal', sans-serif;
    font-size: .78rem;
    cursor: pointer;
    transition: all .2s;
  }
  .stab:hover { background: rgba(184,134,11,.2); color: var(--gold-pale); }
  .stab.active { background: var(--gold); color: var(--ink); font-weight: 700; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  LAYOUT  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .page-body {
    max-width: 1440px;
    margin: 0 auto;
    padding: 1.2rem 1.2rem 3rem;
    display: grid;
    grid-template-columns: 280px 1fr 300px;
    gap: 1.2rem;
    align-items: start;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  PANELS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .panel {
    background: var(--cream);
    border-radius: 14px;
    border: 1px solid var(--parchment-dk);
    box-shadow: 0 2px 14px var(--shadow);
    overflow: hidden;
  }
  .panel-head {
    padding: .7rem 1rem;
    font-family: 'Amiri', serif;
    font-size: 1rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: .4rem;
    color: #fff;
  }
  .panel-head.teal  { background: linear-gradient(90deg, var(--teal), var(--teal-light)); }
  .panel-head.gold  { background: linear-gradient(90deg, var(--copper), var(--gold-light)); }
  .panel-head.dark  { background: linear-gradient(90deg, var(--ink), #3a2508); }
  .panel-head.green { background: linear-gradient(90deg, var(--green), #267a3a); }
  .panel-body { padding: .8rem 1rem; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  SIDEBAR LEFT â€” ROOTS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .root-pill {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .4rem .7rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all .15s;
    font-family: 'Amiri', serif;
    font-size: 1.1rem;
    direction: rtl;
  }
  .root-pill:hover { background: var(--teal-pale); color: var(--teal); }
  .root-pill.selected { background: var(--teal); color: #fff; }
  .root-pill .rpill-count {
    font-size: .68rem;
    background: rgba(0,0,0,.12);
    border-radius: 10px;
    padding: .05rem .45rem;
    font-family: 'Tajawal', sans-serif;
  }
  .scroll-box { max-height: 240px; overflow-y: auto; }
  .scroll-box::-webkit-scrollbar { width: 4px; }
  .scroll-box::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 2px; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  MAIN AREA  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .view { display: none; }
  .view.active { display: block; animation: fadeUp .3s ease; }

  /* â”€â”€â”€  DICTIONARY VIEW  â”€â”€â”€ */
  .dict-entry-header {
    background: linear-gradient(135deg, var(--ink) 0%, #2e1a06 100%);
    border-radius: 14px 14px 0 0;
    padding: 2rem 2rem 1.5rem;
    text-align: center;
    color: var(--gold-pale);
    position: relative;
    overflow: hidden;
  }
  .dict-entry-header::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse at 50% 0%, rgba(184,134,11,.15), transparent 70%);
  }
  .dict-root-big {
    font-family: 'Amiri', serif;
    font-size: clamp(3rem, 7vw, 5rem);
    font-weight: 700;
    line-height: 1;
    color: #fff;
    text-shadow: 0 3px 20px rgba(184,134,11,.5);
    position: relative;
  }
  .dict-root-big .dash { color: var(--gold-light); font-size: 60%; vertical-align: middle; }
  .dict-root-subtitle {
    font-size: .85rem;
    color: var(--gold-pale);
    opacity: .65;
    margin-top: .4rem;
    position: relative;
  }
  .dict-root-tags { display: flex; gap: .4rem; justify-content: center; margin-top: .8rem; position: relative; flex-wrap: wrap; }
  .tag {
    display: inline-block;
    border-radius: 20px;
    padding: .2rem .8rem;
    font-size: .75rem;
    font-weight: 700;
  }
  .tag-gold  { background: var(--gold);        color: #fff; }
  .tag-teal  { background: var(--teal-light);  color: #fff; }
  .tag-green { background: var(--green);        color: #fff; }
  .tag-red   { background: var(--red);          color: #fff; }

  .dict-body { padding: 1.5rem; }
  .dict-section-title {
    font-family: 'Amiri', serif;
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--teal);
    margin-bottom: .8rem;
    padding-bottom: .4rem;
    border-bottom: 2px solid var(--teal-pale);
    display: flex;
    align-items: center;
    gap: .5rem;
  }

  /* scheme cards grid */
  .scheme-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: .8rem; }
  .scheme-card {
    background: var(--parchment);
    border: 1.5px solid var(--parchment-dk);
    border-radius: 10px;
    padding: .9rem 1rem;
    direction: rtl;
    transition: all .2s;
    cursor: pointer;
    position: relative;
  }
  .scheme-card:hover { border-color: var(--teal); background: var(--teal-pale); transform: translateY(-2px); box-shadow: 0 6px 20px var(--shadow); }
  .scheme-card .sc-word {
    font-family: 'Amiri', serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--teal);
    display: block;
  }
  .scheme-card .sc-pattern {
    font-family: 'Amiri', serif;
    font-size: .85rem;
    color: var(--gold);
    margin-top: .15rem;
    display: block;
  }
  .scheme-card .sc-def {
    font-size: .72rem;
    color: #666;
    margin-top: .4rem;
    line-height: 1.4;
    border-top: 1px solid var(--parchment-dk);
    padding-top: .4rem;
  }
  .scheme-card .sc-badge {
    position: absolute;
    top: .5rem;
    left: .5rem;
    font-size: .62rem;
    background: var(--teal);
    color: #fff;
    border-radius: 10px;
    padding: .1rem .45rem;
  }

  /* â”€â”€â”€  SCHEME / PATTERN DETAIL PANEL  â”€â”€â”€ */
  .scheme-detail {
    background: var(--gold-pale);
    border: 2px solid var(--gold);
    border-radius: 12px;
    padding: 1.2rem 1.4rem;
    margin-bottom: 1.2rem;
    direction: rtl;
  }
  .sd-name { font-family: 'Amiri', serif; font-size: 2.2rem; font-weight: 700; color: var(--ink); }
  .sd-category { font-size: .78rem; color: var(--gold); font-weight: 700; margin-bottom: .3rem; }
  .sd-definition { font-size: .93rem; color: #444; line-height: 1.7; margin-top: .5rem; }
  .sd-examples { display: flex; flex-wrap: wrap; gap: .4rem; margin-top: .8rem; }
  .sd-example {
    background: var(--teal);
    color: #fff;
    border-radius: 8px;
    padding: .25rem .8rem;
    font-family: 'Amiri', serif;
    font-size: 1rem;
  }

  /* â”€â”€â”€  VALIDATION VIEW  â”€â”€â”€ */
  .val-result-yes { font-family: 'Amiri', serif; font-size: 3rem; font-weight: 700; color: var(--green); text-align: center; }
  .val-result-no  { font-family: 'Amiri', serif; font-size: 3rem; font-weight: 700; color: var(--red);   text-align: center; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  SIDEBAR RIGHT â€” PATTERNS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .pat-item {
    display: flex;
    align-items: flex-start;
    gap: .6rem;
    padding: .5rem .6rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all .15s;
    direction: rtl;
    border-bottom: 1px solid var(--parchment-dk);
  }
  .pat-item:last-child { border-bottom: none; }
  .pat-item:hover { background: var(--gold-pale); }
  .pat-item.selected { background: var(--gold-pale); border-right: 3px solid var(--gold); }
  .pat-item .pi-name { font-family: 'Amiri', serif; font-size: 1.15rem; font-weight: 700; color: var(--teal); }
  .pat-item .pi-def  { font-size: .7rem; color: #777; line-height: 1.4; margin-top: .1rem; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  FORMS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .form-group { margin-bottom: .85rem; }
  label.fl {
    display: block;
    font-size: .75rem;
    font-weight: 700;
    color: var(--teal);
    text-transform: uppercase;
    letter-spacing: .05em;
    margin-bottom: .3rem;
  }
  input[type="text"], select, textarea {
    width: 100%;
    padding: .55rem .9rem;
    border: 2px solid var(--parchment-dk);
    border-radius: 8px;
    background: var(--parchment);
    font-family: 'Amiri', serif;
    font-size: 1.05rem;
    color: var(--ink);
    direction: rtl;
    outline: none;
    transition: border-color .2s, box-shadow .2s;
  }
  input:focus, select:focus { border-color: var(--teal); box-shadow: 0 0 0 3px rgba(23,82,79,.12); background: #fff; }
  .hint { font-size: .72rem; color: #999; margin-top: .2rem; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  BUTTONS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .btn {
    display: inline-flex; align-items: center; justify-content: center; gap: .4rem;
    padding: .55rem 1.3rem;
    border: none; border-radius: 8px; cursor: pointer;
    font-family: 'Tajawal', sans-serif; font-size: .88rem; font-weight: 700;
    transition: all .18s;
  }
  .btn-teal  { background: linear-gradient(135deg, var(--teal), var(--teal-light)); color: #fff; box-shadow: 0 2px 8px rgba(23,82,79,.3); }
  .btn-gold  { background: linear-gradient(135deg, var(--copper), var(--gold-light)); color: #fff; box-shadow: 0 2px 8px rgba(184,134,11,.3); }
  .btn-red   { background: linear-gradient(135deg, var(--red), #b83232); color: #fff; }
  .btn-ghost { background: var(--parchment); color: var(--ink); border: 1.5px solid var(--parchment-dk); }
  .btn:hover { transform: translateY(-1px); filter: brightness(1.07); }
  .btn:active { transform: translateY(0); }
  .btn-full { width: 100%; }
  .btn-sm { padding: .3rem .75rem; font-size: .78rem; }
  .btn-group { display: flex; gap: .5rem; flex-wrap: wrap; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  RESULTS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .rbox {
    border-radius: 10px;
    padding: .9rem 1.1rem;
    margin-top: .8rem;
    border-right: 4px solid var(--teal);
    background: var(--teal-pale);
    font-size: .93rem;
    direction: rtl;
    animation: fadeUp .25s ease;
  }
  .rbox.err  { border-color: var(--red);   background: #fde8e8; }
  .rbox.ok   { border-color: var(--green);  background: var(--green-pale); }
  .rbox.warn { border-color: var(--gold);   background: var(--gold-pale); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  CHECKBOX GROUP  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .check-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: .3rem;
    max-height: 220px;
    overflow-y: auto;
    border: 1px solid var(--parchment-dk);
    border-radius: 8px;
    padding: .6rem;
    background: var(--parchment);
  }
  .check-grid label {
    display: flex; align-items: center; gap: .4rem;
    font-family: 'Amiri', serif;
    font-size: 1rem;
    cursor: pointer;
    padding: .15rem .3rem;
    border-radius: 5px;
    transition: background .1s;
    direction: rtl;
  }
  .check-grid label:hover { background: var(--gold-pale); }
  .check-grid input[type="checkbox"] { accent-color: var(--teal); width: 14px; height: 14px; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  FAMILY GRID  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .fam-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
    gap: .65rem;
  }
  .fam-item {
    background: var(--parchment);
    border: 1.5px solid var(--parchment-dk);
    border-radius: 10px;
    padding: .7rem .9rem;
    text-align: center;
    direction: rtl;
    cursor: pointer;
    transition: all .15s;
  }
  .fam-item:hover { border-color: var(--teal); background: var(--teal-pale); transform: translateY(-2px); }
  .fam-item .fi-word    { font-family: 'Amiri', serif; font-size: 1.4rem; color: var(--teal); font-weight: 700; display: block; }
  .fam-item .fi-pattern { font-size: .7rem; color: #888; font-family: 'Amiri', serif; margin-top: .2rem; display: block; }
  .fam-item .fi-def     { font-size: .65rem; color: #aaa; margin-top: .2rem; line-height: 1.3; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  DIVIDER  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .divider { height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); margin: 1rem 0; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  EMPTY  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .empty { text-align: center; padding: 2.5rem 1rem; color: #bbb; }
  .empty .ei { font-size: 2.8rem; display: block; margin-bottom: .5rem; }
  .empty p   { font-family: 'Amiri', serif; font-size: 1.05rem; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  TOAST  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .toast {
    position: fixed; bottom: 2rem; left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--ink); color: var(--gold-pale);
    padding: .6rem 1.5rem; border-radius: 30px; font-size: .88rem;
    border: 1px solid var(--gold); z-index: 9999;
    transition: transform .3s; pointer-events: none;
    font-family: 'Amiri', serif;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  ANIMATIONS  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @keyframes fadeUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
  @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  RESPONSIVE  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media (max-width: 1100px) {
    .page-body { grid-template-columns: 240px 1fr; }
    .right-panel { display: none; }
  }
  @media (max-width: 720px) {
    .page-body { grid-template-columns: 1fr; }
    .left-panel { display: none; }
    .search-section { padding: .7rem 1rem 1rem; }
  }
  @media (max-width: 480px) {
    .scheme-grid { grid-template-columns: 1fr; }
    .fam-grid    { grid-template-columns: 1fr 1fr; }
  }
</style>
</head>
<body>

<!-- â•â•â•  HEADER  â•â•â• -->
<header>
  <div class="header-inner">
    <div class="header-logo">
      <div class="title-ar">Ù…Ø­Ø±Ùƒ Ø§Ù„Ø§Ø´ØªÙ‚Ø§Ù‚ ÙˆØ§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ÙˆØ±ÙÙˆÙ„ÙˆØ¬ÙŠ</div>
      <div class="title-fr">Moteur de Recherche Morphologique &amp; GÃ©nÃ©rateur de DÃ©rivation Arabe Â· ISI 1ING 2025-2026</div>
    </div>
    <div class="header-badges">
      <div class="hbadge"><strong id="stat-roots">23</strong>Ø¬Ø°Ø±</div>
      <div class="hbadge"><strong id="stat-patterns">29</strong>ÙˆØ²Ù†</div>
      <div class="hbadge"><strong id="stat-deriv">0</strong>Ù…Ø´ØªÙ‚</div>
    </div>
  </div>
</header>

<!-- â•â•â•  SEARCH BAR  â•â•â• -->
<div class="search-section">
  <div class="search-inner">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input type="text" id="global-search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ø°Ø±ØŒ ÙƒÙ„Ù…Ø©ØŒ Ø£Ùˆ ÙˆØ²Ù†..." oninput="globalSearch(this.value)" autocomplete="off">
      <button class="btn btn-gold btn-sm" onclick="globalSearch(document.getElementById('global-search').value)">Ø¨Ø­Ø«</button>
    </div>
    <div class="search-tabs">
      <button class="stab active"  onclick="activateView('dict',    this)">ğŸ“– Ø§Ù„Ù‚Ø§Ù…ÙˆØ³</button>
      <button class="stab"         onclick="activateView('generate', this)">âš™ï¸ ØªÙˆÙ„ÙŠØ¯</button>
      <button class="stab"         onclick="activateView('validate', this)">âœ… ØªØ­Ù‚Ù‚</button>
      <button class="stab"         onclick="activateView('explorer', this)">ğŸ—ºï¸ Ø§Ø³ØªÙƒØ´Ø§Ù</button>
      <button class="stab"         onclick="activateView('manage',   this)">ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø©</button>
      <button class="stab"         onclick="activateView('schemes',  this)">ğŸ“ Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ø£ÙˆØ²Ø§Ù†</button>
    </div>
  </div>
</div>

<!-- â•â•â•  TOAST  â•â•â• -->
<div class="toast" id="toast"></div>

<!-- â•â•â•  PAGE BODY  â•â•â• -->
<div class="page-body">

  <!-- LEFT SIDEBAR â€” ROOTS -->
  <aside class="left-panel">
    <div class="panel" style="margin-bottom:1rem;">
      <div class="panel-head teal">ğŸŒ³ Ø§Ù„Ø¬Ø°ÙˆØ±</div>
      <div class="panel-body" style="padding:.5rem .7rem;">
        <input type="text" id="root-filter" placeholder="ØªØµÙÙŠØ©..." oninput="filterRoots(this.value)"
               style="margin-bottom:.5rem;font-size:.9rem;padding:.35rem .7rem;">
        <div class="scroll-box" id="root-sidebar"></div>
      </div>
    </div>
    <div class="panel">
      <div class="panel-head gold">âš¡ Ø¥Ø¶Ø§ÙØ© Ø¬Ø°Ø±</div>
      <div class="panel-body">
        <input type="text" id="quick-add-root" placeholder="Ùƒ-Øª-Ø¨" style="margin-bottom:.5rem;">
        <button class="btn btn-gold btn-full btn-sm" onclick="quickAddRoot()">â• Ø¥Ø¶Ø§ÙØ©</button>
        <div id="qar-msg"></div>
      </div>
    </div>
  </aside>

  <!-- CENTRE â€” MAIN VIEWS -->
  <main>

    <!-- â”€â”€ DICTIONARY VIEW â”€â”€ -->
    <div class="view active" id="view-dict">
      <div id="dict-home">
        <div style="padding:1.5rem 0 1rem;text-align:center;font-family:'Amiri',serif;font-size:1.05rem;color:#888;">
          Ø§Ø®ØªØ± Ø¬Ø°Ø±Ù‹Ø§ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ùˆ Ø§Ø¨Ø­Ø« Ø¹Ù†Ù‡
        </div>
        <div id="dict-featured"></div>
      </div>
      <div id="dict-entry" style="display:none;">
        <!-- filled dynamically -->
      </div>
    </div>

    <!-- â”€â”€ GENERATE VIEW â”€â”€ -->
    <div class="view" id="view-generate">
      <div class="panel">
        <div class="panel-head teal">âš™ï¸ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø´ØªÙ‚Ø©</div>
        <div class="panel-body">
          <div class="form-group">
            <label class="fl">Ø§Ù„Ø¬Ø°Ø± Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
            <input type="text" id="gen-root" placeholder="Ùƒ-Øª-Ø¨">
            <div class="hint">Ø­Ø±Ù-Ø­Ø±Ù-Ø­Ø±Ù</div>
          </div>
          <div class="form-group">
            <label class="fl">Ø§Ø®ØªØ± Ø§Ù„Ø£ÙˆØ²Ø§Ù†</label>
            <div class="check-grid" id="gen-patterns"></div>
          </div>
          <div class="btn-group" style="margin-top:.5rem;">
            <button class="btn btn-teal" onclick="doGenSelected()">âš¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø®ØªØ§Ø±</button>
            <button class="btn btn-gold" onclick="doGenFamily()">ğŸŒ¿ ÙƒÙ„ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</button>
            <button class="btn btn-ghost btn-sm" onclick="checkAll()">â˜‘ Ø§Ù„ÙƒÙ„</button>
            <button class="btn btn-ghost btn-sm" onclick="uncheckAll()">â˜ Ø¥Ù„ØºØ§Ø¡</button>
          </div>
          <div id="gen-result"></div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ VALIDATE VIEW â”€â”€ -->
    <div class="view" id="view-validate">
      <div class="panel">
        <div class="panel-head green">âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…ÙˆØ±ÙÙˆÙ„ÙˆØ¬ÙŠ</div>
        <div class="panel-body">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
            <div class="form-group">
              <label class="fl">Ø§Ù„Ø¬Ø°Ø± Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
              <input type="text" id="val-root" placeholder="Ùƒ-Øª-Ø¨">
            </div>
            <div class="form-group">
              <label class="fl">Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ ÙØ­ØµÙ‡Ø§</label>
              <input type="text" id="val-word" placeholder="Ù…ÙƒØªÙˆØ¨">
            </div>
          </div>
          <button class="btn btn-teal btn-full" onclick="doValidate()">ğŸ” ØªØ­Ù‚Ù‚ Ø§Ù„Ø¢Ù†</button>
          <div id="val-result"></div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ EXPLORER VIEW â”€â”€ -->
    <div class="view" id="view-explorer">
      <div class="panel">
        <div class="panel-head gold">ğŸ—ºï¸ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„Ù„ØºÙˆÙŠØ©</div>
        <div class="panel-body">
          <div class="form-group">
            <label class="fl">Ø§Ø®ØªØ± Ø¬Ø°Ø±Ù‹Ø§</label>
            <select id="exp-root">
              <option value="">-- Ø§Ø®ØªØ± --</option>
            </select>
          </div>
          <button class="btn btn-gold btn-full" onclick="doExplore()">ğŸŒ¿ Ø§Ø³ØªÙƒØ´Ù</button>
          <div id="exp-result" style="margin-top:1rem;"></div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ MANAGE VIEW â”€â”€ -->
    <div class="view" id="view-manage">
      <div class="panel">
        <div class="panel-head dark">ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø°ÙˆØ± ÙˆØ§Ù„Ø£ÙˆØ²Ø§Ù†</div>
        <div class="panel-body">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.2rem;">
            <!-- roots -->
            <div>
              <div class="dict-section-title" style="font-size:1rem;">ğŸŒ³ Ø§Ù„Ø¬Ø°ÙˆØ±</div>
              <div class="form-group">
                <label class="fl">Ø¥Ø¶Ø§ÙØ© Ø¬Ø°Ø±</label>
                <input type="text" id="mgmt-add-root" placeholder="Ùƒ-Øª-Ø¨">
              </div>
              <button class="btn btn-teal btn-full" onclick="mgmtAddRoot()" style="margin-bottom:.5rem;">â• Ø¥Ø¶Ø§ÙØ©</button>
              <div class="form-group" style="margin-top:.5rem;">
                <label class="fl">Ø¨Ø­Ø« Ø¹Ù† Ø¬Ø°Ø±</label>
                <input type="text" id="mgmt-search-root" placeholder="Ùƒ-Øª-Ø¨">
              </div>
              <button class="btn btn-ghost btn-full" onclick="mgmtSearchRoot()">ğŸ” Ø¨Ø­Ø«</button>
              <div id="mgmt-root-msg" style="margin-top:.5rem;"></div>
              <div class="divider"></div>
              <div class="form-group">
                <label class="fl">Ø¹Ø±Ø¶ Ù…Ø´ØªÙ‚Ø§Øª Ø¬Ø°Ø±</label>
                <input type="text" id="mgmt-deriv-root" placeholder="Ùƒ-Øª-Ø¨">
              </div>
              <button class="btn btn-gold btn-full" onclick="mgmtShowDerivs()">ğŸ“‹ Ø¹Ø±Ø¶</button>
              <div id="mgmt-deriv-msg" style="margin-top:.5rem;"></div>
            </div>
            <!-- patterns -->
            <div>
              <div class="dict-section-title" style="font-size:1rem;">ğŸ“ Ø§Ù„Ø£ÙˆØ²Ø§Ù†</div>
              <div class="form-group">
                <label class="fl">Ø¥Ø¶Ø§ÙØ© ÙˆØ²Ù†</label>
                <input type="text" id="mgmt-add-pat" placeholder="Ù…Ø«Ø§Ù„: Ù…ÙØ§Ø¹Ù„Ø©">
              </div>
              <button class="btn btn-teal btn-full" onclick="mgmtAddPat()" style="margin-bottom:.5rem;">â• Ø¥Ø¶Ø§ÙØ©</button>
              <div class="form-group" style="margin-top:.5rem;">
                <label class="fl">Ø­Ø°Ù ÙˆØ²Ù†</label>
                <input type="text" id="mgmt-del-pat" placeholder="Ù…Ø«Ø§Ù„: Ù…ÙØ¹Ø§Ù„">
              </div>
              <button class="btn btn-red btn-full" onclick="mgmtDelPat()">ğŸ—‘ Ø­Ø°Ù</button>
              <div id="mgmt-pat-msg" style="margin-top:.5rem;"></div>
            </div>
          </div>
          <div class="divider"></div>
          <div class="dict-section-title" style="font-size:1rem;">ÙƒÙ„ Ø§Ù„Ø¬Ø°ÙˆØ±</div>
          <div id="mgmt-all-roots" style="display:flex;flex-wrap:wrap;gap:.35rem;"></div>
          <div class="divider"></div>
          <div class="dict-section-title" style="font-size:1rem;">ÙƒÙ„ Ø§Ù„Ø£ÙˆØ²Ø§Ù†</div>
          <div id="mgmt-all-pats" style="display:flex;flex-wrap:wrap;gap:.35rem;"></div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ SCHEMES ENCYCLOPEDIA VIEW â”€â”€ -->
    <div class="view" id="view-schemes">
      <div class="panel">
        <div class="panel-head gold">ğŸ“ Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„ØµØ±ÙÙŠØ©</div>
        <div class="panel-body">
          <input type="text" id="scheme-filter" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ²Ù†..."
                 oninput="filterSchemes(this.value)" style="margin-bottom:1rem;">
          <div id="schemes-grid"></div>
        </div>
      </div>
    </div>

  </main>

  <!-- RIGHT SIDEBAR â€” PATTERNS DICTIONARY -->
  <aside class="right-panel">
    <div class="panel">
      <div class="panel-head gold">ğŸ“ Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„ØµØ±ÙÙŠØ©</div>
      <div class="panel-body" style="padding:.4rem .6rem;">
        <div class="scroll-box" style="max-height:600px;" id="pat-sidebar"></div>
      </div>
    </div>
  </aside>

</div><!-- /page-body -->

<script>
/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘   MORPHOLOGICAL ENGINE â€” Full JS Implementation     â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// â”€â”€ SCHEME DEFINITIONS DATABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const SCHEME_DEFS = {
  'ÙØ§Ø¹Ù„':    { cat: 'Ø§Ø³Ù… Ø§Ù„ÙØ§Ø¹Ù„',        def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…Ù† Ù‚Ø§Ù… Ø¨Ø§Ù„ÙØ¹Ù„',                          ex: ['ÙƒØ§ØªØ¨','Ø¯Ø±Ø³','Ø¹Ø§Ù„Ù…','ÙØ§Ù‡Ù…'] },
  'Ù…ÙØ¹ÙˆÙ„':   { cat: 'Ø§Ø³Ù… Ø§Ù„Ù…ÙØ¹ÙˆÙ„',       def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…Ù† ÙˆÙ‚Ø¹ Ø¹Ù„ÙŠÙ‡ Ø§Ù„ÙØ¹Ù„',                      ex: ['Ù…ÙƒØªÙˆØ¨','Ù…Ø¯Ø±ÙˆØ³','Ù…ÙÙ‡ÙˆÙ…'] },
  'ÙØ¹Ù‘Ø§Ù„':   { cat: 'ØµÙŠØºØ© Ø§Ù„Ù…Ø¨Ø§Ù„ØºØ©',     def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ø§Ù„ØºØ© ÙÙŠ Ø§Ù„ÙØ¹Ù„',                      ex: ['ÙƒØªÙ‘Ø§Ø¨','Ø¯Ø±Ù‘Ø§Ø³','Ø¹Ù„Ù‘Ø§Ù…'] },
  'Ù…ÙØ¹Ù„':    { cat: 'Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù†/Ø§Ù„Ø²Ù…Ø§Ù†', def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…ÙƒØ§Ù† ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ Ø²Ù…Ø§Ù†Ù‡',              ex: ['Ù…ÙƒØªØ¨','Ù…Ø¯Ø±Ø³Ø©','Ù…ÙØ¹Ù„'] },
  'ØªÙØ¹ÙŠÙ„':   { cat: 'Ø§Ù„Ù…ØµØ¯Ø± Ù„Ù„ØªÙØ¹ÙŠÙ„',    def: 'Ù…ØµØ¯Ø± Ø§Ù„ÙØ¹Ù„ Ø¹Ù„Ù‰ ÙˆØ²Ù† ÙØ¹Ù‘Ù„',                        ex: ['ØªÙƒØªÙŠØ¨','ØªØ¯Ø±ÙŠØ³','ØªØ¹Ù„ÙŠÙ…'] },
  'Ù…ÙØ§Ø¹Ù„Ø©':  { cat: 'Ù…ØµØ¯Ø± Ø§Ù„Ù…ÙØ§Ø¹Ù„Ø©',     def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ Ø¨ÙŠÙ† Ø§Ø«Ù†ÙŠÙ† Ø¨Ø§Ù„ØªØ¨Ø§Ø¯Ù„',          ex: ['Ù…ÙƒØ§ØªØ¨Ø©','Ù…Ø¯Ø§Ø±Ø³Ø©','Ù…ÙØ§Ø¹Ù„Ø©'] },
  'Ù…ÙØ¹Ø§Ù„':   { cat: 'ØµÙŠØºØ© Ø§Ù„Ù…Ø¨Ø§Ù„ØºØ©',     def: 'ØµÙŠØºØ© Ù…Ø¨Ø§Ù„ØºØ© ØªØ¯Ù„ Ø¹Ù„Ù‰ ÙƒØ«Ø±Ø© ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„',            ex: ['Ù…ÙƒØªØ§Ø¨','Ù…Ù‚Ø±Ø§Ø¡','Ù…ÙØ¹Ø§Ù„'] },
  'Ø§ÙØªØ¹Ø§Ù„':  { cat: 'Ù…ØµØ¯Ø± Ø§Ù„Ø§ÙØªØ¹Ø§Ù„',     def: 'Ù…ØµØ¯Ø± Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¨Ø§Ù„Ø§ÙØªØ¹Ø§Ù„',                    ex: ['Ø§ÙƒØªØªØ§Ø¨','Ø§Ø¬ØªÙ…Ø§Ø¹','Ø§ÙØªØ¹Ø§Ù„'] },
  'Ø§ÙØªØ¹Ù„':   { cat: 'ÙØ¹Ù„ Ø§Ù„Ø§ÙØªØ¹Ø§Ù„',      def: 'ÙØ¹Ù„ Ù…Ø§Ø¶Ù Ø¹Ù„Ù‰ ÙˆØ²Ù† Ø§ÙØªØ¹Ù„ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ',        ex: ['Ø§ÙƒØªØªØ¨','Ø§Ø¬ØªÙ…Ø¹','Ø§ÙØªØ¹Ù„'] },
  'Ø§Ø³ØªÙØ¹Ø§Ù„': { cat: 'Ù…ØµØ¯Ø± Ø§Ù„Ø§Ø³ØªÙØ¹Ø§Ù„',    def: 'Ù…ØµØ¯Ø± Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¨Ø§Ù„Ø§Ø³ØªÙØ¹Ø§Ù„ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨',     ex: ['Ø§Ø³ØªÙƒØªØ§Ø¨','Ø§Ø³ØªØ¬Ù„Ø§Ø¨','Ø§Ø³ØªÙØ¹Ø§Ù„'] },
  'ÙØ¹ÙŠÙ„':    { cat: 'ØµÙØ© Ù…Ø´Ø¨Ù‡Ø©',         def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ ØµÙØ© Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø§Ù„Ù…ÙˆØµÙˆÙ',                   ex: ['ÙƒØ¨ÙŠØ±','ØµØºÙŠØ±','Ø¬Ù…ÙŠÙ„','Ø¹Ù„ÙŠÙ…'] },
  'ÙØ¹ÙˆÙ„':    { cat: 'ØµÙŠØºØ© Ù…Ø¨Ø§Ù„ØºØ©',       def: 'ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨Ø§Ù„ØºØ© ÙˆØ§Ù„ÙƒØ«Ø±Ø© ÙÙŠ Ø§Ù„ÙØ¹Ù„',              ex: ['Ø´Ø±ÙˆØ¨','Ø£ÙƒÙˆÙ„','Ø¶Ø±ÙˆØ¨'] },
  'Ø£ÙØ¹Ù„':    { cat: 'ÙØ¹Ù„ Ø§Ù„Ø¥ÙØ¹Ø§Ù„ / Ø£ÙØ¹Ù„ ØªÙØ¶ÙŠÙ„', def: 'ÙØ¹Ù„ Ø±Ø¨Ø§Ø¹ÙŠ Ù…Ø²ÙŠØ¯ Ø¨Ø§Ù„Ù‡Ù…Ø²Ø©ØŒ Ø£Ùˆ ØµÙŠØºØ© Ø§Ù„ØªÙØ¶ÙŠÙ„', ex: ['Ø£ÙƒØ±Ù…','Ø£Ø¹Ù„Ù…','Ø£ÙØ¶Ù„'] },
  'ØªÙØ§Ø¹Ù„':   { cat: 'ÙØ¹Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„',       def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ Ø¨ÙŠÙ† Ø£ÙƒØ«Ø± Ù…Ù† ÙØ§Ø¹Ù„',            ex: ['ØªÙƒØ§ØªØ¨','ØªØ¯Ø§Ø±Ø³','ØªØ¹Ø§Ù„Ù…'] },
  'Ø§Ù†ÙØ¹Ø§Ù„':  { cat: 'Ù…ØµØ¯Ø± Ø§Ù„Ø§Ù†ÙØ¹Ø§Ù„',     def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø·Ø§ÙˆØ¹Ø© ÙˆÙ‚Ø¨ÙˆÙ„ Ø£Ø«Ø± Ø§Ù„ÙØ¹Ù„',               ex: ['Ø§Ù†ÙƒØ³Ø§Ø±','Ø§Ù†ÙØªØ§Ø­','Ø§Ù†ÙØ¹Ø§Ù„'] },
  'Ù…Ø³ØªÙØ¹Ù„':  { cat: 'Ø§Ø³Ù… ÙØ§Ø¹Ù„ Ø§Ù„Ø§Ø³ØªÙØ¹Ø§Ù„', def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…Ù† ÙŠØ·Ù„Ø¨ Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ ÙŠØ³Ø¹Ù‰ Ø¥Ù„ÙŠÙ‡',           ex: ['Ù…Ø³ØªÙƒØªØ¨','Ù…Ø³ØªØ¹Ù…Ù„','Ù…Ø³ØªÙØ¹Ù„'] },
  'ÙØ§Ø¹ÙˆÙ„':   { cat: 'ØµÙŠØºØ© Ù…Ø¨Ø§Ù„ØºØ© Ù†Ø§Ø¯Ø±Ø©', def: 'ØµÙŠØºØ© Ù…Ø¨Ø§Ù„ØºØ© Ø¹Ù„Ù‰ ÙˆØ²Ù† ÙØ§Ø¹ÙˆÙ„ ØªØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ«Ø±Ø©',      ex: ['ÙØ§Ø±ÙˆÙ‚','Ø¬Ø§Ø³ÙˆØ³','ÙØ§Ø¹ÙˆÙ„'] },
  'ØªÙØ¹Ù‘Ù„':   { cat: 'ÙØ¹Ù„ Ø§Ù„ØªÙØ¹Ù‘Ù„',       def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ„Ù ÙÙŠ Ø§Ù„ÙØ¹Ù„ Ø£Ùˆ Ù‚Ø¨ÙˆÙ„Ù‡ Ø´ÙŠØ¦Ù‹Ø§ ÙØ´ÙŠØ¦Ù‹Ø§', ex: ['ØªÙƒØªÙ‘Ø¨','ØªØ¹Ù„Ù‘Ù…','ØªÙØ¹Ù‘Ù„'] },
  'Ø§ÙØ¹Ø§Ù„':   { cat: 'Ù…ØµØ¯Ø± Ø§Ù„Ø¥ÙØ¹Ø§Ù„',      def: 'Ù…ØµØ¯Ø± Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ø¨Ø§Ù„Ù‡Ù…Ø²Ø©',                     ex: ['Ø¥ÙƒØ±Ø§Ù…','Ø¥Ø¹Ù„Ø§Ù…','Ø¥ÙƒØªØ§Ø¨'] },
  'ÙØ¹Ù„Ø§Ù†':   { cat: 'ØµÙØ© Ù…Ø´Ø¨Ù‡Ø©',         def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø­Ø±ÙƒØ© Ø£Ùˆ Ø§Ø¶Ø·Ø±Ø§Ø¨ ÙÙŠ Ø§Ù„Ù…ÙˆØµÙˆÙ',              ex: ['ØºØ¶Ø¨Ø§Ù†','Ø¹Ø·Ø´Ø§Ù†','ÙØ±Ø­Ø§Ù†'] },
  'ÙØ¹Ù„Ø©':    { cat: 'Ø§Ø³Ù… Ù…Ø±Ø©',           def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ ÙˆÙ‚ÙˆØ¹ Ø§Ù„ÙØ¹Ù„ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©',                  ex: ['Ø¶Ø±Ø¨Ø©','ÙƒØªØ¨Ø©','Ø£ÙƒÙ„Ø©'] },
  'ÙØ¹ÙŠÙ„Ø§Ù†':  { cat: 'Ù…Ø«Ù†Ù‰ Ø§Ù„ØµÙØ©',        def: 'Ù…Ø«Ù†Ù‰ ÙˆØ²Ù† ÙØ¹ÙŠÙ„ Ù„Ù„ØªØ«Ù†ÙŠØ©',                          ex: ['ÙƒØ±ÙŠÙ…Ø§Ù†','Ø¹Ù„ÙŠÙ…Ø§Ù†','ÙØ¹ÙŠÙ„Ø§Ù†'] },
  'Ù…ÙØ§Ø¹Ù„':   { cat: 'Ø¬Ù…Ø¹ Ù…ÙØ¹Ù„',          def: 'Ø¬Ù…Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…ÙƒØ§Ù† Ø£Ùˆ Ø§Ù„Ø²Ù…Ø§Ù† Ø¹Ù„Ù‰ Ù…ÙØ§Ø¹Ù„',             ex: ['Ù…ÙƒØ§ØªØ¨','Ù…Ø¯Ø§Ø±Ø³','Ù…Ø³Ø§Ø¬Ø¯'] },
  'Ù…ÙØ¹Ù„Ø©':   { cat: 'Ø§Ø³Ù… Ù…ÙƒØ§Ù† / Ù…ØµØ¯Ø±',  def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ù…ÙƒØ§Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø´ÙŠØ¡ Ø¨ÙƒØ«Ø±Ø©',                  ex: ['Ù…ÙƒØªØ¨Ø©','Ù…Ø¯Ø±Ø³Ø©','Ù…Ø²Ø±Ø¹Ø©'] },
  'Ù…ÙØ§Ø¹ÙŠÙ„':  { cat: 'Ø¬Ù…Ø¹ Ù…ÙØ¹Ø§Ù„',         def: 'Ø¬Ù…Ø¹ Ø§Ù„ØªÙƒØ³ÙŠØ± Ù„ØµÙŠØºØ© Ù…ÙØ¹Ø§Ù„',                        ex: ['Ù…ÙØ§ØªÙŠØ­','Ù…ØµØ§Ø¨ÙŠØ­','Ù…ÙØ§Ø¹ÙŠÙ„'] },
  'ÙÙˆØ§Ø¹Ù„':   { cat: 'Ø¬Ù…Ø¹ ÙØ§Ø¹Ù„Ø©',         def: 'Ø¬Ù…Ø¹ Ø§Ù„ØªÙƒØ³ÙŠØ± Ù„Ø§Ø³Ù… Ø§Ù„ÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø¤Ù†Ø«',                 ex: ['ÙƒÙˆØ§ØªØ¨','Ø¯ÙˆØ§Ø±Ø³','ÙÙˆØ§Ø¹Ù„'] },
  'ÙÙˆØ§Ø¹ÙŠÙ„':  { cat: 'Ø¬Ù…Ø¹ ÙØ§Ø¹ÙŠÙ„',         def: 'Ø¬Ù…Ø¹ Ø§Ù„ØªÙƒØ³ÙŠØ± Ù„ØµÙŠØºØ© ÙØ§Ø¹ÙŠÙ„',                        ex: ['Ø¹ØµØ§ÙÙŠØ±','Ø£Ù†Ø§Ø¨ÙŠØ¨','ÙÙˆØ§Ø¹ÙŠÙ„'] },
  'ÙØ¹Ø§Ù„Ø©':   { cat: 'Ù…ØµØ¯Ø± / Ø­Ø±ÙØ©',       def: 'ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±ÙØ© Ø£Ùˆ Ø§Ù„Ù…Ù‡Ù†Ø©',                        ex: ['ÙƒØªØ§Ø¨Ø©','Ø®ÙŠØ§Ø·Ø©','Ù†Ø¬Ø§Ø±Ø©'] },
  'ØªÙØ¹Ù„Ø©':   { cat: 'Ù…ØµØ¯Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„',      def: 'Ù…ØµØ¯Ø± Ø¢Ø®Ø± Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„ØªÙØ¹ÙŠÙ„ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ­ÙˆÙŠÙ„',        ex: ['ØªÙƒÙ…Ù„Ø©','ØªÙˆØµÙŠØ©','ØªÙØ¹Ù„Ø©'] },
};

// â”€â”€ NORMALIZATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DIACRITICS = /[\u064B-\u065F\u0670]/g;
const ALEF_MAP = {'Ø¢':'Ø§','Ø£':'Ø§','Ø¥':'Ø§','Ù±':'Ø§'};

function norm(s) {
  return s.replace(DIACRITICS,'').replace(/[Ø¢Ø£Ø¥Ù±]/g, c => ALEF_MAP[c]||c).trim();
}
function isAr(c) { return c >= '\u0621' && c <= '\u064A'; }
function compact(dashed) { return norm(dashed).replace(/-/g,''); }
function dashed(cmp) { return cmp.split('').join('-'); }

function validateRoot(raw) {
  const n = norm(raw);
  const letters = n.replace(/-/g,'');
  if (!letters) return 'Ø§Ù„Ø¬Ø°Ø± ÙØ§Ø±Øº';
  if (!letters.split('').every(isAr)) return 'ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·';
  if (letters.length !== 3) return 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ø¬Ø°Ø± Ø¹Ù„Ù‰ 3 Ø­Ø±ÙˆÙ ÙÙ‚Ø·';
  if (n.split('-').length - 1 !== 2) return 'ØµÙŠØºØ©: Ø­Ø±Ù-Ø­Ø±Ù-Ø­Ø±Ù (Ù…Ø«Ø§Ù„: Ùƒ-Øª-Ø¨)';
  return null;
}

// â”€â”€ DATA STORE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const roots    = {}; // compact -> {derived: {word->count}}
const patterns = {}; // normalized -> displayForm

const INIT_ROOTS = [
  'Ùƒ-Øª-Ø¨','Ø¯-Ø±-Ø³','Ø¹-Ù„-Ù…','Ù-Ù‡-Ù…','Ù‚-Ø±-Ø£','Ø³-Ù…-Ø¹','Ø°-Ù‡-Ø¨','Ø¬-Ù„-Ø³','Ø­-Ø³-Ø¨','Ø¹-Ù…-Ù„',
  'Ù-Ø¹-Ù„','Øµ-Ù†-Ø¹','Ù„-Ø¹-Ø¨','Ø±-Ùƒ-Ø¨','Ø´-Ø±-Ø¨','Ø£-Ùƒ-Ù„','Ù†-Ø²-Ù„','Ø±-Ø¬-Ø¹','Ø®-Ø±-Ø¬','Ø¯-Ø®-Ù„',
  'Ù-Øª-Ø­','Ø­-Ù…-Ù„','Ùˆ-Ø¬-Ø¯'
];
const INIT_PATS = [
  'ÙØ§Ø¹Ù„','Ù…ÙØ¹ÙˆÙ„','ÙØ¹Ù‘Ø§Ù„','Ù…ÙØ¹Ù„','ØªÙØ¹ÙŠÙ„','Ù…ÙØ§Ø¹Ù„Ø©','Ù…ÙØ¹Ø§Ù„','Ø§ÙØªØ¹Ø§Ù„','Ø§ÙØªØ¹Ù„',
  'Ø§Ø³ØªÙØ¹Ø§Ù„','ÙØ¹ÙŠÙ„','ÙØ¹ÙˆÙ„','Ø£ÙØ¹Ù„','ØªÙØ§Ø¹Ù„','Ø§Ù†ÙØ¹Ø§Ù„','Ù…Ø³ØªÙØ¹Ù„','ÙØ§Ø¹ÙˆÙ„','ØªÙØ¹Ù‘Ù„',
  'Ø§ÙØ¹Ø§Ù„','ÙØ¹Ù„Ø§Ù†','ÙØ¹Ù„Ø©','ÙØ¹ÙŠÙ„Ø§Ù†','Ù…ÙØ§Ø¹Ù„','Ù…ÙØ¹Ù„Ø©','Ù…ÙØ§Ø¹ÙŠÙ„','ÙÙˆØ§Ø¹Ù„','ÙÙˆØ§Ø¹ÙŠÙ„',
  'ÙØ¹Ø§Ù„Ø©','ØªÙØ¹Ù„Ø©'
];

function init() {
  INIT_ROOTS.forEach(r => { const c = compact(r); roots[c] = { derived:{} }; });
  INIT_PATS.forEach(p  => { const n = norm(p);    patterns[n] = p; });
}

// â”€â”€ ENGINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function derive(rawRoot, normPat) {
  const err = validateRoot(rawRoot);
  if (err) return null;
  const parts = norm(rawRoot).split('-');
  if (parts.length !== 3) return null;
  const [f, a, l] = parts;
  return normPat.split('').map(c => c==='Ù'?f : c==='Ø¹'?a : c==='Ù„'?l : c).join('');
}

function addDerived(cmp, word) {
  if (!roots[cmp]) return;
  roots[cmp].derived[word] = (roots[cmp].derived[word]||0)+1;
  updateStats();
}

function genOne(rawRoot, rawPat, store=true) {
  const err = validateRoot(rawRoot);
  if (err) return {ok:false, error:err};
  const cmp = compact(rawRoot);
  if (!roots[cmp]) return {ok:false, error:'Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'};
  const np = norm(rawPat);
  if (!patterns[np]) return {ok:false, error:'Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'};
  const word = derive(rawRoot, np);
  if (!word) return {ok:false, error:'ÙØ´Ù„ Ø§Ù„Ø§Ø´ØªÙ‚Ø§Ù‚'};
  if (store) addDerived(cmp, word);
  return {ok:true, word, normPat:np, display:patterns[np]};
}

function genFamily(rawRoot) {
  const cmp = compact(rawRoot);
  if (!roots[cmp]) return null;
  const res = [];
  Object.keys(patterns).forEach(np => {
    const word = derive(rawRoot, np);
    if (word) { addDerived(cmp, word); res.push({np, display:patterns[np], word}); }
  });
  return res;
}

function validateWord(rawRoot, rawWord) {
  const cmp = compact(rawRoot);
  if (!roots[cmp]) return {result:'NON', pattern:null};
  const nw = norm(rawWord);
  for (const np of Object.keys(patterns)) {
    const w = derive(rawRoot, np);
    if (w && norm(w) === nw) { addDerived(cmp, w); return {result:'OUI', pattern:np, display:patterns[np]}; }
  }
  return {result:'NON', pattern:null};
}

// â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateStats() {
  document.getElementById('stat-roots').textContent    = Object.keys(roots).length;
  document.getElementById('stat-patterns').textContent = Object.keys(patterns).length;
  let t = 0;
  Object.values(roots).forEach(r => t += Object.keys(r.derived).length);
  document.getElementById('stat-deriv').textContent = t;
}

// â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toast(msg, ms=2400) {
  const el = document.getElementById('toast');
  el.textContent = msg; el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), ms);
}

// â”€â”€ VIEWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentView = 'dict';
function activateView(name, btn) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.stab').forEach(b => b.classList.remove('active'));
  document.getElementById('view-'+name).classList.add('active');
  if (btn) btn.classList.add('active');
  currentView = name;
  if (name==='manage')  { renderMgmtAll(); }
  if (name==='schemes') { renderSchemesGrid(''); }
  if (name==='generate'){ renderGenPatterns(); }
  if (name==='explorer'){ populateExpSelect(); }
  if (name==='dict')    { renderFeatured(); }
}

// â”€â”€ SIDEBAR RENDERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderRootSidebar(filter='') {
  const el = document.getElementById('root-sidebar');
  const all = Object.keys(roots).map(c => dashed(c)).sort();
  const fil = filter ? all.filter(r => r.includes(filter) || compact(r).includes(norm(filter))) : all;
  if (!fil.length) { el.innerHTML = '<div class="empty" style="padding:1rem;"><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ø°ÙˆØ±</p></div>'; return; }
  el.innerHTML = fil.map(r => {
    const c = compact(r);
    const cnt = Object.keys(roots[c]?.derived||{}).length;
    return `<div class="root-pill" onclick="openDictEntry('${r}')" id="rp-${c}">
      <span>${r}</span><span class="rpill-count">${cnt}</span>
    </div>`;
  }).join('');
}

function filterRoots(v) { renderRootSidebar(v); }

function renderPatSidebar() {
  const el = document.getElementById('pat-sidebar');
  el.innerHTML = Object.keys(patterns).map(np => {
    const d  = patterns[np];
    const df = SCHEME_DEFS[norm(d)] || SCHEME_DEFS[d] || {};
    return `<div class="pat-item" onclick="openSchemeDetail('${np}')">
      <div>
        <div class="pi-name">${d}</div>
        <div class="pi-def">${df.cat||''}</div>
      </div>
    </div>`;
  }).join('');
}

// â”€â”€ DICTIONARY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFeatured() {
  const all = Object.keys(roots).map(c => dashed(c)).slice(0,6);
  document.getElementById('dict-featured').innerHTML = all.map(r => miniRootCard(r)).join('');
}

function miniRootCard(dashedRoot) {
  const cmp = compact(dashedRoot);
  const family = genFamily(dashedRoot) || [];
  const letters = dashedRoot.split('-');
  const count = family.length;
  const preview = family.slice(0,6).map(f =>
    `<span class="scheme-card" style="min-height:auto;padding:.5rem .7rem;" onclick="openSchemeDetail('${f.np}')">
      <span class="sc-word">${f.word}</span>
      <span class="sc-pattern">${f.display}</span>
    </span>`
  ).join('');
  return `
    <div style="background:var(--cream);border:1px solid var(--parchment-dk);border-radius:14px;margin-bottom:1rem;overflow:hidden;">
      <div style="background:linear-gradient(90deg,var(--ink),#2e1a06);padding:.7rem 1.2rem;display:flex;align-items:center;justify-content:space-between;cursor:pointer;" onclick="openDictEntry('${dashedRoot}')">
        <div style="font-family:'Amiri',serif;font-size:1.8rem;color:#fff;">${letters[0]}<span style="color:var(--gold-light);font-size:1.1rem;">â€“</span>${letters[1]}<span style="color:var(--gold-light);font-size:1.1rem;">â€“</span>${letters[2]}</div>
        <div><span class="tag tag-gold">${count} Ù…Ø´ØªÙ‚</span></div>
      </div>
      <div style="padding:.8rem 1rem;display:flex;flex-wrap:wrap;gap:.4rem;">${preview}</div>
    </div>`;
}

function openDictEntry(dashedRoot) {
  // select root in sidebar
  document.querySelectorAll('.root-pill').forEach(p => p.classList.remove('selected'));
  const rp = document.getElementById('rp-'+compact(dashedRoot));
  if (rp) rp.classList.add('selected');

  // ensure dict view active
  if (currentView !== 'dict') {
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById('view-dict').classList.add('active');
    document.querySelectorAll('.stab').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.stab')[0].classList.add('active');
    currentView = 'dict';
  }

  const home  = document.getElementById('dict-home');
  const entry = document.getElementById('dict-entry');
  home.style.display  = 'none';
  entry.style.display = 'block';

  const cmp = compact(dashedRoot);
  const family = genFamily(dashedRoot) || [];
  const letters = dashedRoot.split('-');
  const derivedStored = Object.entries(roots[cmp]?.derived||{});

  const schemeCards = family.map(f => {
    const df = SCHEME_DEFS[norm(f.display)] || SCHEME_DEFS[f.display] || {};
    return `
      <div class="scheme-card" onclick="openSchemeDetail('${f.np}')">
        <span class="sc-badge">${df.cat||'ÙˆØ²Ù†'}</span>
        <span class="sc-word">${f.word}</span>
        <span class="sc-pattern">${f.display}</span>
        ${df.def ? `<div class="sc-def">${df.def}</div>` : ''}
      </div>`;
  }).join('');

  entry.innerHTML = `
    <div class="dict-entry-header">
      <div class="dict-root-big">
        ${letters[0]}<span class="dash"> â€“ </span>${letters[1]}<span class="dash"> â€“ </span>${letters[2]}
      </div>
      <div class="dict-root-subtitle">${dashedRoot} Â· Ø¬Ø°Ø± Ø«Ù„Ø§Ø«ÙŠ</div>
      <div class="dict-root-tags">
        <span class="tag tag-teal">${family.length} Ù…Ø´ØªÙ‚</span>
        <span class="tag tag-gold">BST âœ“</span>
        ${derivedStored.length ? `<span class="tag tag-green">Ù…Ø­ÙÙˆØ¸: ${derivedStored.length}</span>` : ''}
      </div>
    </div>
    <div class="dict-body">
      <button class="btn btn-ghost btn-sm" onclick="backToHome()" style="margin-bottom:1rem;">â† Ø§Ù„Ø¹ÙˆØ¯Ø©</button>

      <div class="dict-section-title">âš™ï¸ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„ØµØ±ÙÙŠØ©</div>
      <div class="scheme-grid">${schemeCards}</div>

      ${derivedStored.length ? `
      <div class="divider"></div>
      <div class="dict-section-title">ğŸ’¾ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙˆØ§Ù„Ù…ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§</div>
      <div style="display:flex;flex-wrap:wrap;gap:.4rem;direction:rtl;">
        ${derivedStored.map(([w,cnt]) => `
          <span style="background:var(--green-pale);border:1px solid var(--green);border-radius:8px;padding:.25rem .8rem;font-family:'Amiri',serif;font-size:1.1rem;color:var(--green);">
            ${w} <span style="font-size:.65rem;opacity:.7;">(${cnt})</span>
          </span>`).join('')}
      </div>` : ''}

      <div class="divider"></div>
      <div class="dict-section-title">âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹</div>
      <div style="display:flex;gap:.6rem;align-items:center;flex-wrap:wrap;">
        <input type="text" id="inline-val-word" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù„Ù„ØªØ­Ù‚Ù‚..." style="max-width:240px;">
        <button class="btn btn-teal" onclick="inlineValidate('${dashedRoot}')">ØªØ­Ù‚Ù‚</button>
      </div>
      <div id="inline-val-result"></div>
    </div>`;
}

function backToHome() {
  document.getElementById('dict-home').style.display  = 'block';
  document.getElementById('dict-entry').style.display = 'none';
  document.querySelectorAll('.root-pill').forEach(p => p.classList.remove('selected'));
}

function inlineValidate(dashedRoot) {
  const word = document.getElementById('inline-val-word').value.trim();
  if (!word) return;
  const res = validateWord(dashedRoot, word);
  const el  = document.getElementById('inline-val-result');
  if (res.result === 'OUI') {
    el.innerHTML = `<div class="rbox ok" style="margin-top:.6rem;">
      âœ… Ù†Ø¹Ù… â€” Ø§Ù„ÙƒÙ„Ù…Ø© <strong>${word}</strong> Ù…Ø´ØªÙ‚Ø© Ù…Ù† <strong>${dashedRoot}</strong> Ø¹Ù„Ù‰ ÙˆØ²Ù† <strong>${res.display||res.pattern}</strong>
    </div>`;
  } else {
    el.innerHTML = `<div class="rbox err" style="margin-top:.6rem;">âŒ Ù„Ø§ â€” Ø§Ù„ÙƒÙ„Ù…Ø© <strong>${word}</strong> Ù„Ø§ ØªÙ†ØªÙ…ÙŠ Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø°Ø±</div>`;
  }
  renderRootSidebar();
  updateStats();
}

// â”€â”€ SCHEME DETAIL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openSchemeDetail(np) {
  const display = patterns[np] || np;
  const df = SCHEME_DEFS[norm(display)] || SCHEME_DEFS[display] || {};

  activateView('schemes', document.querySelectorAll('.stab')[5]);
  document.getElementById('scheme-filter').value = '';
  renderSchemesGrid('');

  // scroll to and highlight
  setTimeout(() => {
    const card = document.getElementById('sc-'+np);
    if (card) { card.scrollIntoView({behavior:'smooth',block:'center'}); card.style.borderColor = 'var(--gold)'; }
  }, 200);
}

function renderSchemesGrid(filter) {
  const el = document.getElementById('schemes-grid');
  const ps = Object.keys(patterns);
  const fn = norm(filter);
  const filtered = fn
    ? ps.filter(np => np.includes(fn) || norm(patterns[np]).includes(fn))
    : ps;

  el.innerHTML = `<div class="scheme-grid">` + filtered.map(np => {
    const d  = patterns[np];
    const df = SCHEME_DEFS[norm(d)] || SCHEME_DEFS[d] || {};
    const exHtml = (df.ex||[]).map(e => `<span class="sd-example">${e}</span>`).join('');
    return `
      <div class="scheme-card" id="sc-${np}" onclick="openSchemeDetail('${np}')" style="cursor:default;padding:1.1rem;">
        <span class="sc-badge">${df.cat||'ÙˆØ²Ù†'}</span>
        <span class="sc-word" style="font-size:2rem;">${d}</span>
        <div style="margin-top:.5rem;">
          <div style="font-size:.72rem;color:var(--gold);font-weight:700;margin-bottom:.2rem;">${df.cat||'ÙˆØ²Ù† ØµØ±ÙÙŠ'}</div>
          <div style="font-size:.82rem;color:#444;line-height:1.6;">${df.def||'ÙˆØ²Ù† ØµØ±ÙÙŠ Ø¹Ø±Ø¨ÙŠ ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª.'}</div>
          ${df.ex ? `<div class="sd-examples" style="margin-top:.6rem;">${exHtml}</div>` : ''}
        </div>
      </div>`;
  }).join('') + `</div>`;
}

function filterSchemes(v) { renderSchemesGrid(v); }

// â”€â”€ GLOBAL SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function globalSearch(query) {
  if (!query.trim()) return;
  const n = norm(query);

  // Check if it's a root
  const matchRoot = Object.keys(roots).find(c => c.includes(n));
  if (matchRoot) { openDictEntry(dashed(matchRoot)); return; }

  // Check patterns
  const matchPat = Object.keys(patterns).find(np => np.includes(n) || norm(patterns[np]).includes(n));
  if (matchPat) { openSchemeDetail(matchPat); return; }

  // Search in derived words
  let found = null;
  outer: for (const [c, data] of Object.entries(roots)) {
    for (const w of Object.keys(data.derived)) {
      if (norm(w).includes(n)) { found = dashed(c); break outer; }
    }
  }
  if (found) { openDictEntry(found); return; }

  toast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù€: ' + query);
}

// â”€â”€ GENERATE TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderGenPatterns() {
  const el = document.getElementById('gen-patterns');
  el.innerHTML = Object.keys(patterns).map(np => {
    const d = patterns[np];
    return `<label><input type="checkbox" value="${np}" checked> ${d}</label>`;
  }).join('');
}
function checkAll()   { document.querySelectorAll('#gen-patterns input').forEach(cb => cb.checked=true); }
function uncheckAll() { document.querySelectorAll('#gen-patterns input').forEach(cb => cb.checked=false); }

function doGenSelected() {
  const rawRoot = document.getElementById('gen-root').value.trim();
  const err = validateRoot(rawRoot);
  if (err) { document.getElementById('gen-result').innerHTML = rbox(err,'err'); return; }
  const cmp = compact(rawRoot);
  if (!roots[cmp]) { document.getElementById('gen-result').innerHTML = rbox('Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø´Ø¬Ø±Ø© â€” Ø£Ø¶ÙÙ‡ Ø£ÙˆÙ„Ø§Ù‹.','err'); return; }

  const checked = [...document.querySelectorAll('#gen-patterns input:checked')].map(cb => cb.value);
  if (!checked.length) { document.getElementById('gen-result').innerHTML = rbox('Ø§Ø®ØªØ± ÙˆØ²Ù†Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.','err'); return; }

  const items = checked.map(np => {
    const word = derive(rawRoot, np);
    if (word) addDerived(cmp, word);
    const d  = patterns[np];
    const df = SCHEME_DEFS[norm(d)] || SCHEME_DEFS[d] || {};
    return word
      ? `<div class="fam-item" onclick="openSchemeDetail('${np}')">
           <span class="fi-word">${word}</span>
           <span class="fi-pattern">${d}</span>
           <div class="fi-def">${df.def||''}</div>
         </div>`
      : `<div class="fam-item" style="opacity:.3"><span class="fi-word">â€”</span><span class="fi-pattern">${d}</span></div>`;
  }).join('');

  document.getElementById('gen-result').innerHTML = `
    <div style="margin-top:1rem;">
      <div class="dict-section-title" style="font-size:.95rem;">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬Ø°Ø± ${rawRoot}</div>
      <div class="fam-grid">${items}</div>
    </div>`;
  renderAll();
}

function doGenFamily() {
  const rawRoot = document.getElementById('gen-root').value.trim();
  const err = validateRoot(rawRoot);
  if (err) { document.getElementById('gen-result').innerHTML = rbox(err,'err'); return; }
  const cmp = compact(rawRoot);
  if (!roots[cmp]) { document.getElementById('gen-result').innerHTML = rbox('Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.','err'); return; }

  const family = genFamily(rawRoot)||[];
  const items = family.map(f => {
    const df = SCHEME_DEFS[norm(f.display)] || SCHEME_DEFS[f.display] || {};
    return `<div class="fam-item" onclick="openSchemeDetail('${f.np}')">
      <span class="fi-word">${f.word}</span>
      <span class="fi-pattern">${f.display}</span>
      <div class="fi-def">${df.def||''}</div>
    </div>`;
  }).join('');

  document.getElementById('gen-result').innerHTML = `
    <div style="margin-top:1rem;">
      <div class="dict-section-title" style="font-size:.95rem;">Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø¬Ø°Ø± ${rawRoot} â€” ${family.length} Ù…Ø´ØªÙ‚</div>
      <div class="fam-grid">${items}</div>
    </div>`;
  renderAll();
}

// â”€â”€ VALIDATE TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function doValidate() {
  const rawRoot = document.getElementById('val-root').value.trim();
  const rawWord = document.getElementById('val-word').value.trim();
  const err = validateRoot(rawRoot);
  if (err) { document.getElementById('val-result').innerHTML = rbox(err,'err'); return; }
  if (!rawWord) { document.getElementById('val-result').innerHTML = rbox('Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ ÙØ­ØµÙ‡Ø§','err'); return; }
  const cmp = compact(rawRoot);
  if (!roots[cmp]) { document.getElementById('val-result').innerHTML = rbox('Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø´Ø¬Ø±Ø©','err'); return; }

  const res = validateWord(rawRoot, rawWord);
  if (res.result === 'OUI') {
    const df = SCHEME_DEFS[norm(res.display||'')] || SCHEME_DEFS[res.display||''] || {};
    document.getElementById('val-result').innerHTML = `
      <div class="rbox ok" style="text-align:center;padding:1.5rem;">
        <div class="val-result-yes">Ù†Ø¹Ù… âœ…</div>
        <div style="margin-top:.8rem;font-size:.95rem;">
          Ø§Ù„ÙƒÙ„Ù…Ø© <strong style="font-family:'Amiri',serif;font-size:1.2rem;">${rawWord}</strong>
          Ù…Ø´ØªÙ‚Ø© Ù…Ù† Ø§Ù„Ø¬Ø°Ø± <strong>${rawRoot}</strong>
        </div>
        <div style="margin-top:.5rem;">
          Ø¹Ù„Ù‰ ÙˆØ²Ù† <span style="font-family:'Amiri',serif;font-size:1.3rem;color:var(--teal);">${res.display||res.pattern}</span>
          ${df.cat ? `<span class="tag tag-gold" style="margin-right:.4rem;">${df.cat}</span>` : ''}
        </div>
        ${df.def ? `<div style="margin-top:.6rem;font-size:.85rem;color:#555;">${df.def}</div>` : ''}
      </div>`;
  } else {
    document.getElementById('val-result').innerHTML = `
      <div class="rbox err" style="text-align:center;padding:1.5rem;">
        <div class="val-result-no">Ù„Ø§ âŒ</div>
        <div style="margin-top:.6rem;">Ø§Ù„ÙƒÙ„Ù…Ø© <strong>${rawWord}</strong> Ù„Ø§ ØªÙ†ØªÙ…ÙŠ Ù…ÙˆØ±ÙÙˆÙ„ÙˆØ¬ÙŠÙ‹Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø°Ø± <strong>${rawRoot}</strong></div>
      </div>`;
  }
  renderAll();
}

// â”€â”€ EXPLORER TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function populateExpSelect() {
  const sel = document.getElementById('exp-root');
  const cur = sel.value;
  sel.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø¬Ø°Ø±Ù‹Ø§ --</option>';
  Object.keys(roots).map(c => dashed(c)).sort().forEach(r => {
    const o = document.createElement('option');
    o.value = r; o.textContent = r;
    sel.appendChild(o);
  });
  if (cur) sel.value = cur;
}

function doExplore() {
  const r = document.getElementById('exp-root').value;
  if (!r) { toast('âš ï¸ Ø§Ø®ØªØ± Ø¬Ø°Ø±Ù‹Ø§ Ø£ÙˆÙ„Ø§Ù‹'); return; }
  const family = genFamily(r)||[];
  const letters = r.split('-');
  const items = family.map(f => {
    const df = SCHEME_DEFS[norm(f.display)] || SCHEME_DEFS[f.display] || {};
    return `<div class="fam-item" onclick="openSchemeDetail('${f.np}')">
      <span class="fi-word">${f.word}</span>
      <span class="fi-pattern">${f.display}</span>
      <div class="fi-def">${df.def||''}</div>
    </div>`;
  }).join('');
  document.getElementById('exp-result').innerHTML = `
    <div style="text-align:center;margin-bottom:1.2rem;">
      <div style="font-family:'Amiri',serif;font-size:3.5rem;font-weight:700;color:var(--ink);">${letters.join(' â€“ ')}</div>
      <div style="color:var(--gold);font-size:.85rem;margin-top:.3rem;">${family.length} Ù…Ø´ØªÙ‚ Ù„ØºÙˆÙŠ</div>
    </div>
    <div class="fam-grid">${items}</div>`;
  renderAll();
}

// â”€â”€ MANAGE TAB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function mgmtAddRoot() {
  const raw = document.getElementById('mgmt-add-root').value.trim();
  const err = validateRoot(raw);
  if (err) { document.getElementById('mgmt-root-msg').innerHTML = rbox(err,'err'); return; }
  const cmp = compact(raw);
  if (roots[cmp]) { document.getElementById('mgmt-root-msg').innerHTML = rbox('Ø§Ù„Ø¬Ø°Ø± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„.','warn'); return; }
  roots[cmp] = {derived:{}};
  document.getElementById('mgmt-root-msg').innerHTML = rbox(`âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${raw}`,'ok');
  document.getElementById('mgmt-add-root').value = '';
  renderAll(); populateExpSelect(); toast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø°Ø±');
}
function mgmtSearchRoot() {
  const raw = document.getElementById('mgmt-search-root').value.trim();
  const cmp = compact(raw);
  if (roots[cmp]) {
    const cnt = Object.keys(roots[cmp].derived).length;
    document.getElementById('mgmt-root-msg').innerHTML = rbox(`âœ… Ø§Ù„Ø¬Ø°Ø± Ù…ÙˆØ¬ÙˆØ¯ Â· ${cnt} Ù…Ø´ØªÙ‚Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©`,'ok');
  } else {
    document.getElementById('mgmt-root-msg').innerHTML = rbox('âŒ Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø´Ø¬Ø±Ø©.','err');
  }
}
function mgmtShowDerivs() {
  const raw = document.getElementById('mgmt-deriv-root').value.trim();
  const cmp = compact(raw);
  if (!roots[cmp]) { document.getElementById('mgmt-deriv-msg').innerHTML = rbox('Ø§Ù„Ø¬Ø°Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.','err'); return; }
  const items = Object.entries(roots[cmp].derived);
  if (!items.length) { document.getElementById('mgmt-deriv-msg').innerHTML = rbox('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´ØªÙ‚Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯.','warn'); return; }
  const html = items.map(([w,c]) => `<span style="font-family:'Amiri',serif;font-size:1.1rem;background:var(--teal-pale);border-radius:6px;padding:.2rem .6rem;">${w} <small>(${c})</small></span>`).join(' ');
  document.getElementById('mgmt-deriv-msg').innerHTML = `<div class="rbox ok" style="margin-top:.5rem;display:flex;flex-wrap:wrap;gap:.4rem;">${html}</div>`;
}
function mgmtAddPat() {
  const raw = document.getElementById('mgmt-add-pat').value.trim();
  const np  = norm(raw);
  if (!np || np.length < 4 || !np.includes('Ù') || !np.includes('Ø¹') || !np.includes('Ù„')) {
    document.getElementById('mgmt-pat-msg').innerHTML = rbox('ÙˆØ²Ù† ØºÙŠØ± ØµØ§Ù„Ø­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù ÙˆØ¹ ÙˆÙ„ (4 Ø£Ø­Ø±Ù+).','err'); return;
  }
  if (patterns[np]) { document.getElementById('mgmt-pat-msg').innerHTML = rbox('Ø§Ù„ÙˆØ²Ù† Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„.','warn'); return; }
  patterns[np] = raw;
  document.getElementById('mgmt-pat-msg').innerHTML = rbox(`âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ²Ù† ${raw}`,'ok');
  document.getElementById('mgmt-add-pat').value = '';
  renderAll(); toast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ²Ù†');
}
function mgmtDelPat() {
  const raw = document.getElementById('mgmt-del-pat').value.trim();
  const np  = norm(raw);
  if (!patterns[np]) { document.getElementById('mgmt-pat-msg').innerHTML = rbox('Ø§Ù„ÙˆØ²Ù† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.','err'); return; }
  delete patterns[np];
  document.getElementById('mgmt-pat-msg').innerHTML = rbox(`âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„ÙˆØ²Ù† ${raw}`,'ok');
  document.getElementById('mgmt-del-pat').value = '';
  renderAll(); toast('ğŸ—‘ ØªÙ… Ø­Ø°Ù Ø§Ù„ÙˆØ²Ù†');
}
function renderMgmtAll() {
  const re = document.getElementById('mgmt-all-roots');
  const pe = document.getElementById('mgmt-all-pats');
  re.innerHTML = Object.keys(roots).map(c => dashed(c)).sort().map(r =>
    `<span onclick="openDictEntry('${r}')" style="cursor:pointer;background:var(--parchment);border:1px solid var(--parchment-dk);border-radius:7px;padding:.25rem .7rem;font-family:'Amiri',serif;font-size:1rem;">${r}</span>`
  ).join('');
  pe.innerHTML = Object.keys(patterns).map(np =>
    `<span onclick="openSchemeDetail('${np}')" style="cursor:pointer;background:var(--gold-pale);border:1px solid var(--parchment-dk);border-radius:7px;padding:.25rem .7rem;font-family:'Amiri',serif;font-size:1rem;">${patterns[np]}</span>`
  ).join('');
}

// â”€â”€ QUICK ADD ROOT (sidebar) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function quickAddRoot() {
  const raw = document.getElementById('quick-add-root').value.trim();
  const err = validateRoot(raw);
  if (err) { document.getElementById('qar-msg').innerHTML = `<div style="font-size:.75rem;color:var(--red);margin-top:.3rem;">${err}</div>`; return; }
  const cmp = compact(raw);
  if (roots[cmp]) { document.getElementById('qar-msg').innerHTML = `<div style="font-size:.75rem;color:var(--gold);margin-top:.3rem;">Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„</div>`; return; }
  roots[cmp] = {derived:{}};
  document.getElementById('quick-add-root').value = '';
  document.getElementById('qar-msg').innerHTML = `<div style="font-size:.75rem;color:var(--green);margin-top:.3rem;">âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©</div>`;
  renderAll(); populateExpSelect(); toast('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø°Ø±');
}

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function rbox(msg, type='info') {
  const cls = type==='err' ? 'err' : type==='ok' ? 'ok' : type==='warn' ? 'warn' : '';
  return `<div class="rbox ${cls}">${msg}</div>`;
}

function renderAll() {
  renderRootSidebar(document.getElementById('root-filter')?.value||'');
  renderPatSidebar();
  updateStats();
}

// â”€â”€ KEYBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  if (e.key !== 'Enter') return;
  if (currentView === 'validate') doValidate();
  if (currentView === 'generate') doGenSelected();
  if (document.activeElement.id === 'global-search') globalSearch(document.activeElement.value);
  if (document.activeElement.id === 'quick-add-root') quickAddRoot();
});

// â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
init();
renderAll();
renderGenPatterns();
populateExpSelect();
renderFeatured();
renderSchemesGrid('');
</script>
</body>
</html>
